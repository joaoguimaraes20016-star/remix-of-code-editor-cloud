/**
 * Phase 38: Visual Parity Lock — CSS
 *
 * LOCKED visual styles for Framer/Perspective mechanical convergence.
 * This CSS is authoritative. Do NOT override with dynamic styles.
 *
 * Structure requirement (MUST be identical in canvas/preview/runtime):
 *
 *   <div class="builder-root">
 *     <div class="builder-canvas-frame">
 *       <div class="builder-page">
 *         {pageContent}
 *       </div>
 *     </div>
 *   </div>
 */

/* ============================================================================
   1. CANONICAL VIEWPORT FRAME (THE BIG FIX)
   ============================================================================ */

.builder-root {
  display: flex;
  justify-content: center;
  padding: 64px 0;
  min-height: 100vh;
  background: radial-gradient(
    circle at top,
    #0b0b0f 0%,
    #000000 70%
  );
}

.builder-canvas-frame {
  width: 390px;
  max-width: 100%;
  background: #000000;
  border-radius: 24px;
  overflow: hidden;
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.05),
    0 40px 120px rgba(0, 0, 0, 0.75);
}

.builder-page {
  display: flex;
  flex-direction: column;
}

/* ============================================================================
   2. VERTICAL RHYTHM — HARD NUMBERS ONLY
   ============================================================================ */

/* Section gaps */
.builder-page > * + * {
  margin-top: 64px;
}

/* Block gaps */
[data-section-role] > * + * {
  margin-top: 24px;
}

/* Text gaps */
.builder-text-block > * + * {
  margin-top: 12px;
}

/* ============================================================================
   3. HERO SECTION — ABSOLUTE CONTRACT
   ============================================================================ */

[data-section-role="hero"] {
  min-height: 85vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 64px 24px;
}

.hero-stack {
  max-width: 320px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 24px;
  text-align: center;
}

/* Hero Typography Lock */
.hero-stack h1,
[data-section-role="hero"] h1,
.builder-page [data-component="headline"] h1 {
  font-size: 28px;
  line-height: 1.25;
  font-weight: 700;
  margin: 0;
}

.hero-stack p,
[data-section-role="hero"] p,
.builder-page [data-component="text"] p {
  font-size: 15px;
  line-height: 1.5;
  opacity: 0.85;
  margin: 0;
}

/* ============================================================================
   4. CTA VISUAL GRAVITY (CRITICAL)
   ============================================================================ */

/* CTA Wrapper Isolation */
.cta-wrapper,
[data-component="button"],
[data-component="cta"] {
  margin-top: 32px;
  margin-bottom: 32px;
  display: flex;
  justify-content: center;
}

/* CTA Must Be Centered with Min Width */
button[data-role="primary-cta"],
.builder-cta-primary,
[data-component="button"] button,
[data-component="cta"] button {
  align-self: center;
  min-width: 240px;
  height: 48px;
  border-radius: 12px;
  font-weight: 600;
  font-size: 15px;
  border: none;
  cursor: pointer;

  /* Perspective-like gradient */
  background: linear-gradient(
    180deg,
    #1e90ff 0%,
    #005ce6 100%
  );

  /* CTA glow shadow */
  box-shadow: 0 8px 24px rgba(0, 120, 255, 0.35);

  color: #ffffff;
  transition: transform 150ms ease, box-shadow 150ms ease;
}

button[data-role="primary-cta"]:hover,
.builder-cta-primary:hover,
[data-component="button"] button:hover,
[data-component="cta"] button:hover {
  transform: translateY(-1px);
  box-shadow: 0 12px 32px rgba(0, 120, 255, 0.45);
}

button[data-role="primary-cta"]:active,
.builder-cta-primary:active,
[data-component="button"] button:active,
[data-component="cta"] button:active {
  transform: translateY(0);
  box-shadow: 0 6px 20px rgba(0, 120, 255, 0.3);
}

/* ============================================================================
   5. MEDIA BLOCKS (VIDEO / IMAGE)
   ============================================================================ */

.media-block,
[data-component="image"],
[data-component="video"],
[data-component="embed"] {
  border-radius: 16px;
  overflow: hidden;
  background: #111;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.6);
}

.media-block img,
[data-component="image"] img {
  width: 100%;
  height: auto;
  display: block;
}

.media-block video,
[data-component="video"] video {
  width: 100%;
  height: auto;
  display: block;
}

/* ============================================================================
   6. MODE PARITY (CANVAS / PREVIEW / RUNTIME)
   DOM must not change. Only behavior flags change.
   ============================================================================ */

/* Editor mode: show guides */
.builder-root[data-mode="canvas"] .builder-canvas-frame {
  /* Subtle editor indicator */
  box-shadow:
    0 0 0 1px rgba(139, 92, 246, 0.1),
    0 0 0 1px rgba(255, 255, 255, 0.05),
    0 40px 120px rgba(0, 0, 0, 0.75);
}

/* Preview mode: hide guides, no interaction styling */
.builder-root[data-mode="preview"] .builder-canvas-frame {
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.05),
    0 40px 120px rgba(0, 0, 0, 0.75);
}

/* Runtime mode: clean, no editor artifacts */
.builder-root[data-mode="runtime"] .builder-canvas-frame {
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.05),
    0 40px 120px rgba(0, 0, 0, 0.75);
}

/* ============================================================================
   7. TYPOGRAPHY BASELINE
   ============================================================================ */

.builder-page {
  font-family: var(--font-sans, 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);
  color: #ffffff;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Headline hierarchy */
.builder-page h1 {
  font-size: 28px;
  font-weight: 700;
  line-height: 1.25;
}

.builder-page h2 {
  font-size: 22px;
  font-weight: 600;
  line-height: 1.3;
}

.builder-page h3 {
  font-size: 18px;
  font-weight: 600;
  line-height: 1.35;
}

/* Body text */
.builder-page p {
  font-size: 15px;
  line-height: 1.5;
  opacity: 0.85;
}

/* ============================================================================
   8. CONTENT SECTIONS
   ============================================================================ */

[data-section-role="content"] {
  padding: 48px 24px;
}

[data-section-role="cta-section"] {
  padding: 32px 24px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* ============================================================================
   9. FORM ELEMENTS (for optin steps)
   ============================================================================ */

/* Input field container */
.builder-input-field {
  position: relative;
  width: 100%;
}

/* Required field indicator */
.builder-input-label-row {
  display: flex;
  align-items: center;
  gap: 4px;
  min-height: 16px;
  margin-bottom: 4px;
}

.builder-input-required {
  color: #ef4444;
  font-size: 14px;
  font-weight: 600;
  line-height: 1;
}

.builder-page input[type="text"],
.builder-page input[type="email"],
.builder-page input[type="tel"],
.builder-page textarea {
  width: 100%;
  padding: 14px 16px;
  font-size: 15px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  color: #ffffff;
  outline: none;
  transition: border-color 150ms ease, box-shadow 150ms ease;
}

.builder-page input[type="text"]:focus,
.builder-page input[type="email"]:focus,
.builder-page input[type="tel"]:focus,
.builder-page textarea:focus {
  border-color: rgba(30, 144, 255, 0.5);
  box-shadow: 0 0 0 3px rgba(30, 144, 255, 0.15);
}

.builder-page input::placeholder,
.builder-page textarea::placeholder {
  color: rgba(255, 255, 255, 0.4);
}

/* Error state for inputs */
.builder-input--error,
.builder-input-wrapper--error {
  border-color: #ef4444 !important;
}

.builder-input-error {
  display: block;
  color: #ef4444;
  font-size: 12px;
  margin-top: 4px;
}

/* ============================================================================
   10. DISABLE DYNAMIC OVERRIDES
   These !important declarations enforce Phase 38 lock.
   ============================================================================ */

/* Prevent personality-based spacing overrides */
.builder-page[data-personality] > * + * {
  margin-top: 64px !important;
}

/* Prevent intent-based spacing overrides */
.builder-page[data-step-intent] > * + * {
  margin-top: 64px !important;
}

/* Lock hero min-height regardless of intent */
[data-section-role="hero"][data-step-intent] {
  min-height: 85vh !important;
}

/* Lock CTA margins regardless of intent */
[data-step-intent] .cta-wrapper,
[data-step-intent] [data-component="button"],
[data-step-intent] [data-component="cta"] {
  margin-top: 32px !important;
  margin-bottom: 32px !important;
}
